framework: 
  http_client:
    scoped_clients:
      ms365.basic:
        scope: '%env(resolve:MS365_SCOPE)%'
        headers:
          'X-Authorization': 'Bearer %env(MS365_API_TOKEN)%'
          Accept: 'application/json'
          Host: '%env(MS365_HOST)%'

services:
  _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.

  camp_reservation_system.client.ms365client:
    class: App\CampReservationSystem\Client\MS365Client
    autowire: false
    arguments:
      $client: '@ms365.basic'
      $campsListsEndpoint: '%env(CAMP_LIST_ENDPOINT)%'

  camp_reservation_system.camp_finder.default:
    class: App\CampReservationSystem\Impl\CampFinder
    arguments:
      $client: '@camp_reservation_system.client.ms365client'
    lazy: true
    shared: true

  App\CampReservationSystem\CampFinderInterface: '@camp_reservation_system.camp_finder.default'

  # Facade
  App\CampReservationSystem\CampReservationSystemModule:
    class: App\CampReservationSystem\CampReservationSystemModule
    shared: true